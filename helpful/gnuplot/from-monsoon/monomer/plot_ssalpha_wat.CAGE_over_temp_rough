#!/bin/bash
set -e 

#using 1M (high) conc for ILs
#used 1us for wat and 500ns for IL

#wat_alpha (with high 294K  pop)
./../../../analysis_scripts/avg_sterror 2 /scratch/ksg225/projects/insulin/insAB/monomer/simulation/4-prod/253K/converged_analysis/analysis_1us/all.dat >> alphaavg_wat_high294K.dat
./../../../analysis_scripts/avg_sterror 2 /scratch/ksg225/projects/insulin/insAB/monomer/simulation/4-prod/294K/converged_analysis/analysis_1us/pop_clustering/kmeans_allss.c0.dat >> alphaavg_wat_high294K.dat
./../../../analysis_scripts/avg_sterror 2 /scratch/ksg225/projects/insulin/insAB/monomer/simulation/4-prod/310K/converged_analysis/analysis_1us/all.dat >> alphaavg_wat_high294K.dat
./../../../analysis_scripts/avg_sterror 2 /scratch/ksg225/projects/insulin/insAB/monomer/simulation/4-prod/350K/converged_analysis/analysis_1us/all.dat >> alphaavg_wat_high294K.dat
#wat_alpha (with low 294K pop)
./../../../analysis_scripts/avg_sterror 2 /scratch/ksg225/projects/insulin/insAB/monomer/simulation/4-prod/253K/converged_analysis/analysis_1us/all.dat >> alphaavg_wat_low294K.dat
./../../../analysis_scripts/avg_sterror 2 /scratch/ksg225/projects/insulin/insAB/monomer/simulation/4-prod/294K/converged_analysis/analysis_1us/pop_clustering/kmeans_allss.c1.dat >> alphaavg_wat_low294K.dat
./../../../analysis_scripts/avg_sterror 2 /scratch/ksg225/projects/insulin/insAB/monomer/simulation/4-prod/310K/converged_analysis/analysis_1us/all.dat >> alphaavg_wat_low294K.dat
./../../../analysis_scripts/avg_sterror 2 /scratch/ksg225/projects/insulin/insAB/monomer/simulation/4-prod/350K/converged_analysis/analysis_1us/all.dat >> alphaavg_wat_low294K.dat

#CAGE_alpha (HC)
./../../../analysis_scripts/avg_sterror 2 /scratch/ksg225/projects/insulin/insAB/monomer_CAGE/1M/simulation/4-prod/253K/converged_analysis/analysis_1us/all.dat >> alphaavg_CAGE.dat
./../../../analysis_scripts/avg_sterror 2 /scratch/ksg225/projects/insulin/insAB/monomer_CAGE/1M/simulation/4-prod/294K/converged_analysis/analysis_1us/all.dat >> alphaavg_CAGE.dat
./../../../analysis_scripts/avg_sterror 2 /scratch/ksg225/projects/insulin/insAB/monomer_CAGE/1M/simulation/4-prod/310K/converged_analysis/analysis_1us/all.dat >> alphaavg_CAGE.dat
./../../../analysis_scripts/avg_sterror 2 /scratch/ksg225/projects/insulin/insAB/monomer_CAGE/1M/simulation/4-prod/350K/converged_analysis/analysis_1us/all.dat >> alphaavg_CAGE.dat

#CAGE_alpha (LC)
./../../../analysis_scripts/avg_sterror 2 /scratch/ksg225/projects/insulin/insAB/monomer_CAGE/0.0XM/simulation/4-prod/253K/converged_analysis/secstruct_1us/all.dat >> alphaavg_CAGElc.dat
./../../../analysis_scripts/avg_sterror 2 /scratch/ksg225/projects/insulin/insAB/monomer_CAGE/0.0XM/simulation/4-prod/294K/converged_analysis/secstruct_1us/all.dat >> alphaavg_CAGElc.dat
./../../../analysis_scripts/avg_sterror 2 /scratch/ksg225/projects/insulin/insAB/monomer_CAGE/0.0XM/simulation/4-prod/310K/converged_analysis/secstruct_1us/all.dat >> alphaavg_CAGElc.dat
./../../../analysis_scripts/avg_sterror 2 /scratch/ksg225/projects/insulin/insAB/monomer_CAGE/0.0XM/simulation/4-prod/350K/converged_analysis/secstruct_1us/all.dat >> alphaavg_CAGElc.dat


gnuplot -persist << EOF
	
#alpha
	set title 'Alpha-Helicity of Monomer (Populations split)'	
	set xlabel 'Temperature (K)'
        set ylabel 'Average Fraction of Alpha-Helicity'  
	set key b l
        #set yrange [0:1]
	set xrange [252:351]
	temperature = "253 294 310 350"
	#set bars 4
	#set pointsize 3

	plot \
"alphaavg_CAGE.dat"  using (word(temperature,int(column(0))+1)+0.0):1 with linespoints pt 1 lw 1 linecolor rgb "green" title "In CAGE (HC)", "" using (word(temperature,int(column(0))+1)+0.0):1:3 with yerrorbars pt 1 lw 1 linecolor rgb "green"  notitle,\
"alphaavg_CAGElc.dat"  using (word(temperature,int(column(0))+1)+0.0):1 with linespoints pt 1 lw 1 linecolor rgb "blue" title "In CAGE (LC)", "" using (word(temperature,int(column(0))+1)+0.0):1:3 with yerrorbars pt 1 lw 1 linecolor rgb "blue" notitle,\
"alphaavg_wat_low294K.dat"   using (word(temperature,int(column(0))+1)+0.0):1 with linespoints pt 1 lw 1 linecolor rgb "red" title "In Water", "" using (word(temperature,int(column(0))+1)+0.0):1:3 with yerrorbars pt 1 lw 1 linecolor rgb "red" notitle,\
"alphaavg_wat_high294K.dat"   using (word(temperature,int(column(0))+1)+0.0):1 with linespoints pt 1 lw 1 linecolor rgb "red"  notitle, "" using (word(temperature,int(column(0))+1)+0.0):1:3 with yerrorbars pt 1 lw 1 linecolor rgb "red" notitle
	pause -1

EOF

rm alphaavg_*.dat



